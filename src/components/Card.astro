---
import Icon from "./Icon.astro";
import { socialAccounts, user } from "./github";
---

<div class="card" style="width: 36rem; height: 20rem;">
  <div class="card-body">
    <div class="row">
      <div
        id="name-container"
        class="col-8 d-flex flex-column justify-content-center"
        data-name="cm-ayf"
      >
        <h2 class="card-title fs-1">🌱🌿☘️🍀</h2>
        <h3 class="card-subtitle mb-2 text-muted">cm-ayf</h3>
      </div>
      <div class="col-4 text-end">
        <img
          src={user.avatar_url}
          alt="icon"
          class="rounded-circle"
          style="max-width: 100%"
        />
      </div>
    </div>
    <p class="pt-3">{user.bio}</p>
    <a href="https://cm-ayf.github.io/" class="card-link">
      https://cm-ayf.github.io/
    </a>
    {
      socialAccounts.github && (
        <Icon service="github" url={socialAccounts.github} class="card-link">
          GitHub @{user.login}
        </Icon>
      )
    }
    {
      socialAccounts.twitter && (
        <Icon service="twitter" url={socialAccounts.twitter} class="card-link">
          Twitter @{user.twitter_username}
        </Icon>
      )
    }
  </div>
</div>

<script>
  /* eslint-disable @typescript-eslint/no-non-null-assertion */
  const nameContainer = document.getElementById("name-container")!;
  const nameH2 = nameContainer.querySelector("h2")!;
  const nameH3 = nameContainer.querySelector("h3")!;
  nameContainer.addEventListener("click", () => {
    const dataName = nameContainer.getAttribute("data-name");
    if (dataName === "cm-ayf") {
      nameContainer.setAttribute("data-name", "futaiwata");
      nameH2.textContent = "岩田風多";
      nameH3.textContent = "いわたふうた";
    } else {
      nameContainer.setAttribute("data-name", "cm-ayf");
      nameH2.textContent = "🌱🌿☘️🍀";
      nameH3.textContent = "cm-ayf";
    }
  });
</script>

<style>
  a.card-link:not(:hover) {
    color: var(--bs-body-color);
    text-decoration: none;
  }

  #name-container {
    cursor: pointer;
  }
</style>
